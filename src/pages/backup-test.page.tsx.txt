import LoginWindow from "@/components/windows/LoginWindow";
import RegWindow from "@/components/windows/RegWindow";
import useCurrentUser from "@/hooks/useCurrentUser";
import useLoginWindow from "@/hooks/useLoginWindow";
import { SessionProvider } from "next-auth/react";
import { useCallback } from "react";
import { Toaster } from "react-hot-toast";

const test = () => {
  const temp = useLoginWindow();
  const logged = useCurrentUser();

  // If current session is logged in
  if (logged.data) {
    console.log(logged.data.display_name);
  }
  const onToggle = useCallback(() => {
    temp.onOpen();
  }, [temp]);

  return (
    <SessionProvider>
      <div>
        {logged.data ? "Welcome " + logged.data.display_name : ""}
        <br />
        <span
          onClick={onToggle}
          className="
              text-black
              cursor-pointer 
              hover:underline
            "
        >
          Sign in
        </span>
        <Toaster />
        <LoginWindow />
        <RegWindow />
      </div>
    </SessionProvider>
  );
};

export default test;
